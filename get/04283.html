<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>

  </head>
  <body>
    <div id="wrapper">
      <div id="left-block">
        <div id="terminal-header">
          <h1>
                                                recursive search and replace old with new string, inside files
                                        </h1>
        </div>
        <div class="terminal-display" id="terminal-display-main">
          <div class="one-liner">
            <div class="line command" title="Click to select this command">
                                                        find . -type f -exec sed -i s/oldstring/newstring/g {} +
                                                </div>
            <div class="sample-output c5" id="sample-output-4283">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                                                                recursive search and replace old with new string, inside files
                                                        </div>
              <div class="description">
                <p>
                                                                        This command find all files in the current dir and subdirs, and replace all occurances of "oldstring" in every file with "newstring".
                                                                </p>
              </div>
            </div>
          </div>
        </div>
        <h3>
                                        Alternatives
                                </h3>
        <p class="c8"></p>
        <div class="terminal-display">
          <div class="one-liner">
            <div class="line command" title="Click to select this command">
                                                        $ grep -rl oldstring . |xargs sed -i -e 's/oldstring/newstring/'
                                                </div>
            <div class="sample-output c5" id="sample-output-1334">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/1334/recursive-search-and-replace-old-with-new-string-inside-files" title="Find out what others think of this command">recursive search and replace old with new string, inside files</a>
              </div>
              <div class="description">
                <p>
                                                                        recursively traverse the directory structure from . down, look for string "oldstring" in all files, and replace it with "newstring", wherever found
                                                                </p>
                <p>
                                                                        also:
                                                                </p>
                <code>grep -rl oldstring . |xargs perl -pi~ -e 's/oldstring/newstring'</code>
              </div>
            </div>
          </div>
          <div class="one-liner">
            <div class="line command" title="Click to select this command">
                                                        grep -rl oldstring . | parallel sed -i -e 's/oldstring/newstring/'
                                                </div>
            <div class="sample-output c5" id="sample-output-4698">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/4698/recursive-search-and-replace-old-with-new-string-inside-files" title="Find out what others think of this command">recursive search and replace old with new string, inside files</a>
              </div>
              <div class="description">
                <p>
                                                                        xargs deals badly with special characters (such as space, ' and "). To see the problem try this:
                                                                </p>
                <p>
                                                                        touch important_file
                                                                </p>
                <p>
                                                                        touch 'not important_file'
                                                                </p>
                <p>
                                                                        ls not* | xargs rm
                                                                </p>
                <p>
                                                                        Parallel https://savannah.nongnu.org/projects/parallel/ does not have this problem.
                                                                </p>
              </div>
            </div>
          </div>
          <div class="one-liner">
            <div class="line command" title="Click to select this command">
                                                        grep -rlZ oldstring . | xargs -0 sed -i -e 's/oldstring/newstring/'
                                                </div>
            <div class="sample-output c5" id="sample-output-9513">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/9513/recursive-search-and-replace-old-with-new-string-inside-files" title="Find out what others think of this command">recursive search and replace old with new string, inside files</a>
              </div>
              <div class="description">
                <p>
                                                                        Using -Z with grep and -0 with xargs handles file names with spaces and special characters.
                                                                </p>
              </div>
            </div>
          </div>
          <div class="one-liner">
            <div class="line command" title="Click to select this command">
                                                        replace old new -- `find -type f`
                                                </div>
            <div class="sample-output c5" id="sample-output-11651">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/11651/recursive-search-and-replace-old-with-new-string-inside-files" title="Find out what others think of this command">recursive search and replace old with new string, inside files</a>
              </div>
              <div class="description">
                <p>
                                                                        Search and replace recursively. :-) Shorter and simpler than the others. And allows more terms:
                                                                </p>
                <p>
                                                                        replace old new [old new ...] -- `find -type f`
                                                                </p>
              </div>
            </div>
          </div>
          <div class="pagination"></div>
        </div>

        <p>
                                        If you can do better, <a href="/commands/edit/0/4283">submit your command</a> here.
                                </p>
        <h3>
                                        What others think
                                </h3>
        <div id="comments">
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                Using sed you can use the 'g' option in case there is more than one occurance of the "oldstring" in the matching sentence.
                                                        </p>
              <p>
                                                                Also find has the '+' sign to behave like using xargs.
                                                        </p>
              <code>find . -type f -exec sed -i "s/oldstring/newstring/g" {} +;</code>
            </div>
          </div>
          <div class="comment comment1">
            <div class="body">
              <p>
                                                                Without the "/g" sed will replace the first occurrence of oldstring in each line, not the first in each file.
                                                        </p>
            </div>
          </div>
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                Thanks for the tip, using + is much faster, guess it's because + doesn't start sed more than once, I've changed the command accordingly.
                                                        </p>
              <p>
                                                                Using "g" with sed is already explained in the comment of the command
                                                        </p>
            </div>
          </div>
          <div class="comment comment1">
            <div class="body">
              <p>
                                                                Thanks for the knowlege johnraff, didn't see your comment before I posted, changed the command and description accordingly.
                                                        </p>
            </div>
          </div>
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                Don't you need a semicolon (;) at the end?
                                                        </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
