<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
        <head>
                <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
                <title></title>
        </head>
        <body>
                <div id="wrapper">
                        <div id="left-block">
                                <div id="terminal-header">
                                        <h1>
                                                sort the output of the 'du' command by largest first, using human readable output.
                                        </h1>
                                </div>
                                <div class="terminal-display one-liner" id="terminal-display-main">
                                        <div class="line command">
                                                du -h --max-depth=1 |sort -rh
                                        </div>
                                        <div class="sample-output c5 output">
                                                <pre>
$ du -h --max-depth=1 |sort -rh
4.7M    .
4.3M    ./locales
120K    ./initializers
112K    ./.svn
112K    ./environments
</pre>
                                        </div>
                                        <div class="details">
                                                <div class="summary">
                                                        sort the output of the 'du' command by largest first, using human readable output.
                                                </div>
                                                <div class="description">
                                                        <p>
                                                                In this case I'm just grabbing the next level of subdirectories (and same level regular files) with the --max-depth=1 flag. leaving out that flag will just give you finer resolution. Note that you have to use the -h switch with both 'du' and with 'sort.'
                                                        </p>
                                                </div>
                                        </div>
                                </div>
                                <h3>
                                        Alternatives
                                </h3>
                                <div class="terminal-display"></div>
                                <h3>
                                        What others think
                                </h3>
                                <div id="comments">
                                        <div class="comment comment0 body">
                                                <p>
                                                        Doesn't seem to work on a linux systems, atleast not on rhel
                                                </p>
                                        </div>
                                        <div class="comment comment1 body">
                                                <p>
                                                        Doesn't seem to work on a linux systems, atleast not on rhel
                                                </p>
                                        </div>
                                        <div class="comment comment0 body">
                                                <p>
                                                        The -h option to sort is a new one. RHEL 5 does not have that version of sort.
                                                </p>
                                                <p>
                                                        You can grab the sort command from a more recent Linux distro and use. I have done that.
                                                </p>
                                        </div>
                                        <div class="comment comment1 body">
                                                <p>
                                                        Short form of this command would be:
                                                </p><code>du -sh * | sort -rh</code>
                                        </div>
                                        <div class="comment comment0 body">
                                                <p>
                                                        For older versions of sort this should to the trick:
                                                </p><code>du --max-depth=1 | sort -nr | awk '{suffs="k M G"; N=split(suffs,suff," "); for(n=1; $1&gt;1024 &amp;&amp; n&lt;N; n=n+1) {$1=$1/1024} printf("%0.1f%s\t%s\n", $1, suff[n], $2)}'</code>
                                        </div>
                                        <div class="comment comment1 body">
                                                <p>
                                                        Yeah, I'm finding that EL 5 (RHEL, CentOS, SL, RedHawk) has an earlier version of sort that doesn't have the '-h' switch. I'm going through some of my older boxes and upgrading sort just to have this. I use it too much not to have it available.
                                                </p>
                                        </div>
                                </div>
                        </div>
                </div>
        </body>
</html>
