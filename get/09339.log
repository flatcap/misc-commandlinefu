http://www.commandlinefu.com/commands/view/09339
http://www.commandlinefu.com/commands/view/9339/access-variables-inside-a-piped-while-loop
