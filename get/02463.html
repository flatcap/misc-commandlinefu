<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>

  </head>
  <body>
    <div id="wrapper">
      <div id="left-block">
        <div id="terminal-header">
          <h1>
                                                Efficiently extract lines between markers
                                        </h1>
        </div>
        <div class="terminal-display" id="terminal-display-main">
          <div class="one-liner">
            <div class="line command" title="Click to select this command">
                                                        sed -n '/START/,${/STOP/q;p}'
                                                </div>
            <div class="sample-output c5" id="sample-output-2463">
              <div class="output">
                <pre>
Match near start of file
--
$ time (sed -n '/,166499.248,/,/!./{/166499/d;/RTKCOMMAND/q;/#BESTPOS/p}' ../UUT1.ASC &gt; temp_time_file)

real    0m0.093s
user    0m0.030s
sys     0m0.030s

$  time (sed -n '/,166499.248,/,/#RTKCOMMAND/{/#BESTPOS/p}' ../UUT1.ASC &gt; temp_time_file)

real    0m2.015s
user    0m0.484s
sys     0m0.061s

$ time (grep -A 2500 -m 1 ",166499.248," ../UUT1.ASC | grep -A 2500 -m  1 '\#RTKCOMMAND' | grep '\#BESTPOS' &gt; temp_time_file)

real    0m0.171s
user    0m0.122s
sys     0m0.060s
--

Match near end of file
--
$ time (sed -n '/,230399.072,/,/#RTKCOMMAND/{/#BESTPOS/p}' ../UUT1.ASC &gt; temp_time_file)

real    0m2.000s
user    0m0.390s
sys     0m0.046s

$ time (sed -n '/,230399.072,/,/!./{/,230399.072,/d;/RTKCOMMAND/q;/#BESTPOS/p}' ../UUT1.ASC &gt; temp_time_file)

real    0m2.015s
user    0m0.468s
sys     0m0.076s

$ time (grep -A 2500 -m 1 ",230399.072," ../UUT1.ASC | grep -A 2500 -m  1 '\#RTKCOMMAND' | grep '\#BESTPOS' &gt; temp_time_file)

real    0m1.703s
user    0m0.137s
sys     0m0.076s
--
</pre>
              </div>
            </div>
            <div class="details">
              <div class="summary">
                                                                Efficiently extract lines between markers
                                                        </div>
              <div class="description">
                <p>
                                                                        GNU Sed can 'address' between two regex, but it continues parsing through to the end of the file. This slight alteration causes it to terminate reading the input file once the STOP match is made.
                                                                </p>
                <p>
                                                                        In my example I have included an extra '/START/d' as my 'start' marker line contains the 'stop' string (I'm extracting data between 'resets' and using the time stamp as the 'start').
                                                                </p>
                <p>
                                                                        My previous coding using grep is slightly faster near the end of the file, but overall (extracting all the reset cycles in turn) the new SED method is quicker and a lot neater.
                                                                </p>
              </div>
            </div>
          </div>
        </div>
        <h3>
                                        Alternatives
                                </h3>
        <p class="c8"></p>
        <div class="terminal-display">
          <div class="pagination"></div>
        </div>

        <p>
                                        If you can do better, <a href="/commands/edit/0/2463">submit your command</a> here.
                                </p>
        <h3>
                                        What others think
                                </h3>
        <div class="comment comment0" id="comments">
          <div class="body">
            <p>
                                                        if you want the line with the STOP marker output as well you can use
                                                </p>
            <code>sed -n '/START/,/!./{p;/STOP/q}'</code>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
