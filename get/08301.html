<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
        <head>
                <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
                <title>Find out current working directory of a process</title>
		<link rel='stylesheet' href='style.css' type='text/css' />
        </head>
        <body>
                <div id="wrapper">
                        <div id="left-block">
                                <div id="terminal-header">
                                        <h1>
                                                Find out current working directory of a process
                                        </h1>
                                </div>
                                <div class="terminal-display one-liner" id="terminal-display-main">
                                        <div class="line command">
                                                readlink /proc/self/cwd
                                        </div>
                                        <div class="sample-output c5 output"></div>
                                        <div class="details">

                                                <div class="description"></div>
                                        </div>
                                </div>
                                <h3>
                                        Alternatives
                                </h3>
                                <div class="terminal-display">
                                        <div class="one-liner">
                                                <div class="line command">
                                                        echo "${0%/*}"
                                                </div>
                                                <div class="sample-output c5 output"></div>
                                                <div class="details">

                                                        <div class="description">
                                                                <p>
                                                                        Invoked from within a shell script, this will print the directory in which the script resides. Doesn't depend on external tools, /proc/self/*, etc.. (`echo` is a shell builtin.) To see the *current working* directory of a script, use `pwd`.
                                                                </p>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="one-liner">
                                                <div class="line command">
                                                        eval ls -l /proc/{$(pgrep -d, COMMAND)}/cwd
                                                </div>
                                                <div class="sample-output c5 output">
                                                        <pre>
$ eval ls -l /proc/{$(pgrep -d, vim)}/cwd
lrwxrwxrwx 1 splante 20000 0 Apr 14 09:25 /proc/11611/cwd -&gt; /home/splante/p
lrwxrwxrwx 1 splante 20000 0 Apr 14 09:26 /proc/11680/cwd -&gt; /tmp
$ sudo ls -l /proc/$(pgrep X)/cwd
lrwxrwxrwx 1 root root 0 Apr 13 18:31 /proc/3945/cwd -&gt; /
</pre>
                                                </div>
                                                <div class="details">

                                                        <div class="description">
                                                                <p>
                                                                        This is an alternative to another command using two xargs. If it's a command you know there's only one of, you can just use:
                                                                </p><code>ls -l /proc/$(pgrep COMMAND)/cwd</code>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="one-liner">
                                                <div class="line command">
                                                        echo COMMAND | xargs -ixxx ps -C xxx -o pid= | xargs -ixxx ls -l /proc/xxx/cwd
                                                </div>
                                                <div class="sample-output c5 output"></div>
                                                <div class="details">

                                                        <div class="description"></div>
                                                </div>
                                        </div>
                                        <div class="one-liner">
                                                <div class="line command">
                                                        mydir=$(cd $(dirname ${BASH_SOURCE:-$0});pwd)
                                                </div>
                                                <div class="sample-output c5 output"></div>
                                                <div class="details">

                                                        <div class="description">
                                                                <p>
                                                                        I submitted a command like this without $0 if $BASH_SOURCE is unset. Therefor, it did only work when using ./script, not using 'sh script'. This version handles both, and will set $mydir in a script to the current working directory. It also works on linux, osx and probably bsd.
                                                                </p>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="one-liner">
                                                <div class="line command">
                                                        pwdx $(pgrep command)
                                                </div>
                                                <div class="sample-output c5 output">
                                                        <pre>
 $ pwdx $(pgrep bash)
2716: /home/user
 $ pwdx $(pgrep Xorg)
1414: Permission denied
</pre>
                                                </div>
                                                <div class="details">

                                                        <div class="description">
                                                                <p>
                                                                        The pwdx command reports the current working directory of a process or processes.
                                                                </p>
                                                        </div>
                                                </div>
                                        </div>
                                </div>
                                <h3>
                                        What others think
                                </h3>
                                <div id="comments">
                                        <div class="comment comment0 body">
                                                <p>
                                                        Unless the path is a link, readlink doesn't echo the path by default. It needs either '-e' or '-m' to echo whether or not the path is to a link.
                                                </p>
                                        </div>
                                        <div class="comment comment1 body">
                                                <p>
                                                        /proc/self/cwd is always a symlink (man proc)
                                                </p>
                                        </div>
                                        <div class="comment comment0 body">
                                                <p>
                                                        This is not really an "alternative" to some of the others, as this is the current working directory of the *current* process. A couple of the earlier alternatives are for finding the working directory of some other command, such as the apache executable or the currently running vim commands.
                                                </p>
                                                <p>
                                                        Your version is almost the same as the much simpler $PWD (or pwd command), except yours returns the canonical version of the directory which is handy. You could accomplish the same with
                                                </p><code>readlink -f $PWD</code>
                                                <p>
                                                        but that's not really easier.
                                                </p>
                                        </div>
                                </div>
                        </div>
                </div>
        </body>
</html>
