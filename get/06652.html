<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>

  </head>
  <body>
    <div id="wrapper">
      <div id="left-block">
        <div id="terminal-header">
          <h1>
                                                Remove all but one specific file
                                        </h1>
        </div>
        <div class="terminal-display" id="terminal-display-main">
          <div class="one-liner">
            <div class="line command">
                                                        rm -f !(survivior.txt)
                                                </div>
            <div class="sample-output c5">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                                                                Remove all but one specific file
                                                        </div>
              <div class="description"></div>
            </div>
          </div>
        </div>
        <h3>
                                        Alternatives
                                </h3>

        <div class="terminal-display">
          <div class="one-liner">
            <div class="line command">
                                                        rm !(*.foo|*.bar|*.baz)
                                                </div>
            <div class="sample-output c5">
              <div class="output">
                <pre>
Example: rm !(*.tex|*.pdf) deletes all except the tex and pdf files.
</pre>
              </div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/5351/delete-all-files-in-a-folder-that-dont-match-a-certain-file-extension">Delete all files in a folder that don't match a certain file extension</a>
              </div>
              <div class="description">
                <p>
                                                                        Deletes all files in a folder that are NOT *.foo, *.bar or *.baz files. Edit the pattern inside the brackets as you like.
                                                                </p>
              </div>
            </div>
          </div>
          <div class="one-liner">
            <div class="line command">
                                                        find . ! -name <span>&lt;FILENAME&gt;</span> -delete
                                                </div>
            <div class="sample-output c5">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/4576/remove-everything-except-that-file">Remove everything except that file</a>
              </div>
              <div class="description">
                <p>
                                                                        it will remove everything except the file names matching you can use also use wildcards
                                                                </p>
              </div>
            </div>
          </div>
          <div class="one-liner">
            <div class="line command">
                                                        ( shopt -s extglob; rm !(<span>&lt;PATTERN&gt;</span>) )
                                                </div>
            <div class="sample-output c5">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/4570/remove-everything-except-that-file">Remove everything except that file</a>
              </div>
              <div class="description">
                <p>
                                                                        Remove everything except that file with shell tricks inside a subshell to avoid changes in the environment.
                                                                </p>
                <code>help shopt</code>
              </div>
            </div>
          </div>
          <div class="one-liner">
            <div class="line command">
                                                        rm !(file_to_keep_undeleted)
                                                </div>
            <div class="sample-output c5">
              <div class="output"></div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/7319/takes-all-file-except-file-between-">Takes all file except file between !()</a>
              </div>
              <div class="description">
                <p>
                                                                        Go to tmp :
                                                                </p>
                <p>
                                                                        cd /tmp; mkdir retmp; cd retmp
                                                                </p>
                <p>
                                                                        Create 10 files :
                                                                </p>
                <p>
                                                                        for i in {1..10}; do touch test$i; done
                                                                </p>
                <p>
                                                                        Remove all files except test10 :
                                                                </p>
                <p>
                                                                        rm !(test10)
                                                                </p>
              </div>
            </div>
          </div>
          <div class="one-liner">
            <div class="line command">
                                                        find . -type f ! -name "*.foo" -name "*.bar" -delete
                                                </div>
            <div class="sample-output c5">
              <div class="output">
                <pre>
enki 13:09:08 /tmp/foo/bar $ find . ! -name "*.xml" ! -name "*.js" -type f -delete
enki 13:12:23 /tmp/foo/bar $
</pre>
              </div>
            </div>
            <div class="details">
              <div class="summary">
                <a href="/commands/view/6761/delete-all-files-in-a-folder-that-dont-match-a-certain-file-extension">Delete all files in a folder that don't match a certain file extension</a>
              </div>
              <div class="description">
                <p>
                                                                        This command is recursive and will delete in all directories in ".". It will find and delete all files not specified with ! -name "pattern". In this case it's file extensions. -type f means it will only find files and not directories. Finally the -delete flag ask find to delete what it matches. You can test the command by running it first without delete and it will list the files it will delete when you run it.
                                                                </p>
              </div>
            </div>
          </div>

        </div>


        <h3>
                                        What others think
                                </h3>
        <div id="comments">
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                Thx! Usual I done it with
                                                        </p>
              <code>find . ! -name ...</code>
              <p>
                                                                Nice tip.
                                                        </p>
            </div>
          </div>
          <div class="comment comment1">
            <div class="body">
              <p>
                                                                Humph? It does not work in Z-Shell neither in BASH. Am I doing something wrong?
                                                        </p>
            </div>
          </div>
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                Got it working in BASH. It's all about 'extglob' option???set it:
                                                        </p>
              <code>shopt -s extglob</code>
              <p>
                                                                and command would work.
                                                        </p>
              <p>
                                                                Still looking for solution for ZSH.
                                                        </p>
            </div>
          </div>
          <div class="comment comment1">
            <div class="body">
              <p>
                                                                For zsh rm -f ^survivior.txt will do but it requires extended_glob
                                                        </p>
            </div>
          </div>
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                Thanks, RanyAlbeg. That really works!
                                                        </p>
            </div>
          </div>
          <div class="comment comment1">
            <div class="body">
              <p>
                                                                You welcome ;)
                                                        </p>
            </div>
          </div>
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                I never feel comfortable specifying the file I want to keep in an rm command.
                                                        </p>
            </div>
          </div>
          <div class="comment comment1">
            <div class="body">
              <p>
                                                                Use backups a few times and then you'll get used to it.
                                                        </p>
            </div>
          </div>
          <div class="comment comment0">
            <div class="body">
              <p>
                                                                As has been noted zsh uses "^" as the 'not' and while the use of 'not' for a none interactive rm may be potencially dangerious, the 'not' is not :)
                                                        </p>
              <p>
                                                                Some examples:
                                                        </p>
              <p>
                                                                ls *^.jpg
                                                        </p>
              <p>
                                                                ls *[^$(date +%F)].*
                                                        </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
