<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
    <link rel='stylesheet' href='style.css' type='text/css' />
    <title>
      command line fu
    </title>
  </head>
  <body>
    <div class='terminal'>
      <div class='author'>
        SlimG
      </div>
      <div class='summary'>
        recursive search and replace old with new string, inside files
      </div>
      <div class='command'>
        find . -type f -exec sed -i s/oldstring/newstring/g {} +
      </div>
      <div class='desc'>
        <p>
          This command find all files in the current dir and subdirs, and replace all occurances of "oldstring" in every file with "newstring".
        </p>
      </div>
    </div>
    <div class='terminal'>
      <div class='author'>
        netfortius
      </div>
      <div class='summary'>
        <a href="/commands/view/1334/recursive-search-and-replace-old-with-new-string-inside-files" title="Find out what others think of this command">recursive search and replace old with new string, inside files</a>
      </div>
      <div class='command'>
        $ grep -rl oldstring . |xargs sed -i -e 's/oldstring/newstring/'
      </div>
      <div class='desc'>
        <p>
          recursively traverse the directory structure from . down, look for string "oldstring" in all files, and replace it with "newstring", wherever found
        </p>
        <p>
          also:
        </p><code>grep -rl oldstring . |xargs perl -pi~ -e 's/oldstring/newstring'</code>
      </div>
    </div>
    <div class='terminal'>
      <div class='author'>
        unixmonkey8046
      </div>
      <div class='summary'>
        <a href="/commands/view/4698/recursive-search-and-replace-old-with-new-string-inside-files" title="Find out what others think of this command">recursive search and replace old with new string, inside files</a>
      </div>
      <div class='command'>
        grep -rl oldstring . | parallel sed -i -e 's/oldstring/newstring/'
      </div>
      <div class='desc'>
        <p>
          xargs deals badly with special characters (such as space, ' and "). To see the problem try this:
        </p>
        <p>
          touch important_file
        </p>
        <p>
          touch 'not important_file'
        </p>
        <p>
          ls not* | xargs rm
        </p>
        <p>
          Parallel https://savannah.nongnu.org/projects/parallel/ does not have this problem.
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        JesusSuperstar
      </div>
      <div class='text'>
        <p>
          Using sed you can use the 'g' option in case there is more than one occurance of the "oldstring" in the matching sentence.
        </p>
        <p>
          Also find has the '+' sign to behave like using xargs.
        </p><code>find . -type f -exec sed -i "s/oldstring/newstring/g" {} +;</code>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        johnraff
      </div>
      <div class='text'>
        <p>
          Without the "/g" sed will replace the first occurrence of oldstring in each line, not the first in each file.
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        SlimG
      </div>
      <div class='text'>
        <p>
          Thanks for the tip, using + is much faster, guess it's because + doesn't start sed more than once, I've changed the command accordingly.
        </p>
        <p>
          Using "g" with sed is already explained in the comment of the command
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        SlimG
      </div>
      <div class='text'>
        <p>
          Thanks for the knowlege johnraff, didn't see your comment before I posted, changed the command and description accordingly.
        </p>
      </div>
    </div>
  </body>
</html>
