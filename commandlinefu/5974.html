<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
    <link rel='stylesheet' href='style.css' type='text/css' />
    <title>
      command line fu
    </title>
  </head>
  <body>
    <div class='terminal'>
      <div class='author'>
        StefanLasiewski
      </div>
      <div class='summary'>
        Delete the previous entry in your history
      </div>
      <div class='command'>
        alias histdel='history -d $((HISTCMD-2)) &amp;&amp; history -d $((HISTCMD-1))'
      </div>
      <div class='sample'>
        <pre>
$ ssh root@www1.example.co m
ssh: Could not resolve hostname www1.example.co: nodename nor servname provided, or not known
$ hackm3!

# (Oh crap. I just typed the password on the commandline)
$ history |tail
...
...
  504  ssh root@www1.example.co m
  505  hackm3!

# Now it's clear. 
$ histdel; histdel
  503  ssh root@www1.example.co m
  504  history |tail
</pre>
      </div>
      <div class='desc'>
        <p>
          I rarely need this, but I have a hard time remembering the command when I need it.
        </p>
        <p>
          Admit it. This has happened to you. Yes this is bad, and you better clean up now.
        </p>
        <p>
          Borrowed from <a href="http://thoughtsbyclayg.blogspot.com/2008/02/how-to-delete-last-command-from-bash.html" rel="nofollow">http://thoughtsbyclayg.blogspot.com/2008/02/how-to-delete-last-command-from-bash.html</a>
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        flatcap
      </div>
      <div class='text'>
        <p>
          Very interesting. There is a way to simplify it, though.
        </p>
        <p>
          First alter the alias to only delete one entry:
        </p><code>alias histdel='history -d $((HISTCMD-1))'</code>
        <p>
          Now the clever bit. Add 'histdel' the the list of commands that are ignored by the history:
        </p><code>export HISTIGNORE=$HISTIGNORE:hd</code>
        <p>
          This means histdel doesn't need to delete itself from the history and you can still run it as many times as you like.
        </p>
        <p>
          Note: I also have aliases to show my history, which don't add to the history.
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        StefanLasiewski
      </div>
      <div class='text'>
        <p>
          @flatcap: Very good. I think I like yours better. You should post that as an alternative.
        </p>
      </div>
    </div>
  </body>
</html>
