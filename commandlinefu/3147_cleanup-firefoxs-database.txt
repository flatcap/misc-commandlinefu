Cleanup firefox's database.

Terminal - Cleanup firefox's database.
pgrep -u `id -u` firefox-bin || find ~/.mozilla/firefox -name
'*.sqlite'|(while read -e f; do echo 'vacuum;'|sqlite3 "$f" ; done)

User: kamathln
Cleanup firefox's database.

Sqlite database keeps collecting cruft as time passes, which can be
cleaned by the 'vacuum;' command. This command cleans up the cruft in all
sqlite files relating to the user you have logged in as. This command has
to be run when firefox is not running, or it will exit displaying the pid
of the firefox running.



find ~/.mozilla/firefox/ -type f -name "*.sqlite" -exec sqlite3 {} vacuum
\;

User: syssyphus
Cleanup firefox's database.
find ~/Library/Application\ Support/Firefox/ -type f -name "*.sqlite"
-exec sqlite3 {} vacuum \;

User: stanishjohnd
Cleanup firefox's database.

For Mac OS X users only


The first part isn't strictly necessary, right? Since sqlite will fail
gracefully if firefox is already running? I think you could use find to do
everything, with an admittedly odd-looking -exec argument:

find ~/.mozilla/firefox -name "*.sqlite" -exec bash -c "<<<'vacuum;'
sqlite {}" \;

using "here documents" to substitute a string for stdin. Putting echo
before bash helps to see what commands would be run without running them
:-).

Comment by bwoodacre 59 weeks and 3 days ago

Yeah. I guess so. I was ujst being extra carefull with the pid part.

With the "do everything with find, I do completely agree with you. And it
is better too, because it will correctly handle if there is a newline in
the file name. Whereas my code will fail miserably.

But I would like to point out that you need to be carefull with your
quotes.

find ~/.mozilla/firefox -name '*.sqlite' -exec bash -c "

Comment by kamathln 57 weeks and 4 days ago

Wow, all this seemed to do it delete my profile. -1

Comment by nbv4 57 weeks and 4 days ago

@nvb4 delete your profile?? wierd. That should never happen unless your
sqlite files were corrupted in the first place. Did you use a wrong
version of sqlite?

Comment by kamathln 57 weeks ago

