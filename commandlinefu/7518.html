<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
    <link rel='stylesheet' href='style.css' type='text/css' />
    <title>
      command line fu
    </title>
  </head>
  <body>
    <div class='terminal'>
      <div class='author'>
        confiq
      </div>
      <div class='summary'>
        stderr in color
      </div>
      <div class='command'>
        mycommand 2&gt; &gt;(while read line; do echo -e "\e[01;31m$line\e[0m"; done)
      </div>
      <div class='desc'>
        <p>
          in case you run some command in CLI and would like to take read strerr little bit better, you can use the following command. It's also possible to grep it if necessary....
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        stbu
      </div>
      <div class='text'>
        <p>
          Can this be applied to the shell as well so that you set it once and it works for all subsequent commands?
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        dstahlke
      </div>
      <div class='text'>
        <p>
          This can be made into a function like so:
        </p><code>function red_error {</code> <code>"$@" 2&gt; &gt;(while read line; do echo -e "\e[01;31m$line\e[0m"; done)</code> <code>}</code>
        <p>
          Then for example:
        </p><code>red_error tar tvf some_file.tgz</code>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        capncanuck
      </div>
      <div class='text'>
        <p>
          Enter the function and the following into your .bashrc.
        </p><code>bind 'RETURN: "\e[1~error \e[4~\n"'</code>
        <p>
          See <a href="http://superuser.com/questions/117227/a-command-before-every-bash-command" rel="nofollow">http://superuser.com/questions/117227/a-command-before-every-bash-command</a> for more info
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        capncanuck
      </div>
      <div class='text'>
        <p>
          replace 'error' with the name of the function, in 'dstahlke''s case 'red_error'
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        capncanuck
      </div>
      <div class='text'>
        <p>
          Hmm, it seems to interfere with 'read'
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        dstahlke
      </div>
      <div class='text'>
        <p>
          It won't die when you hit Ctrl-C. You have to kill a bash process which is a child of the command being run...
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        mweed
      </div>
      <div class='text'>
        <p>
          Another odd option:
        </p><code>exec 3&gt; &gt;(while read line; do echo -e "\e[01;31m$line\e[0m"; done)</code> <code>some_command 2&gt;&amp;3</code>
        <p>
          stderr from some_command will be displayed in red. This opens file handle #3 and pipes it to the subshell until that file handle is closed with exec 3&gt;&amp;-
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        mweed
      </div>
      <div class='text'>
        <p>
          Note that doing:
        </p><code>exec 2&gt; &gt;(while read line; do echo -e "\e[01;31m$line\e[0m"; done)</code>
        <p>
          Will make the shell do exectly what is wanted. all stderr displays in red and stdout displays normally for the shell and commands executed in the shell. Unfortunately is also has the effect of not displaying the prompt and any input until input is completed. Anyone know how to get around this?
        </p>
      </div>
    </div>
  </body>
</html>
