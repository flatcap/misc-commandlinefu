Smart `cd`.. cd to the file directory if you try to cd to a file

Terminal - Smart `cd`.. cd to the file directory if you try to cd to a
file
cd() { if [ -z "$1" ]; then command cd; else if [ -f "$1" ]; then command
cd $(dirname "$1"); else command cd "$1"; fi; fi; }

 { /root } # tail /var/log/messages
 { /root } # ... # ohh, I need to watch more logfiles
 { /root } # cd <alt+.> # to get last parameter
 { /var/log } # # Ready for action in the files folder

User: xeor
Smart `cd`.. cd to the file directory if you try to cd to a file

This little function will smarten 'cd'. If you try to cd into a file
(which I guess we all have done), it cd's into the directory of that file
instead.

I had to use nesten if's, to get cd to still work with 'cd' (to get to
$HOME), 'cd -' (to get to last directory), and 'cd foo\ bar'.


Nice, but we can make it tidier...

First, turn the nested if then if to if, elsif, else fi.

Next drop dirname for shell magic: ${1%/*}

Then move all the command cd's to the end

cd() { if [ -z "$1" ]; then D=~; elif [ -f "$1" ]; then D="${1%/*}"; else
D="$1"; fi; command cd "$D"; }
Comment by flatcap2 24 weeks and 4 days ago

Now only 83 chars and everything still works :-)

cd() { [ -z "$1" ] && set -- ~; [ -f "$1" ] && set -- "${1%/*}"; command
cd "$1"; }
Comment by flatcap2 24 weeks and 3 days ago

Even shorter:

cd(){ [ -f "$1" ]&&builtin cd "${1%/*}"||builtin cd "$1";}
Comment by eightmillion 24 weeks and 1 day ago

Nice (+1) though I probably won't never use it since bash completion don't
complete regular file names.

Comment by rbossy 23 weeks and 5 days ago

