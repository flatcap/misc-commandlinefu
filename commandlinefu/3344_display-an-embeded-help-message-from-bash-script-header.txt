display an embeded help message from bash script header

Terminal - display an embeded help message from bash script header
[ "$1" == "--help" ] && { sed -n -e '/^# Usage:/,/^$/ s/^# \?//p' < $0;
exit; }

 #!/bin/bash
 #
 # Usage: do someting really funny
 #  --help      This message
 #  --force     force be stronger
 #  --remove    delete whatyou've done, be CAREFULL
 #
 # ex:  myfun  dosomething
 #
 # myfun --force dosomething_REALLY_DO_IT
 #

 [ "$1" == "--help" ] && { sed -n -e '/^# Usage:/,/^$/ s/^# \?//p' < $0; exit; }

 echo really funny !

User: syladmin
display an embeded help message from bash script header

With this one liner you can easily output a standard help message using
the following convention:

Usage: is the start marker

Stop at the last #


Why didn't I think of that? Elegant.

Comment by sufoo 57 weeks and 4 days ago

This is pickier, but shorter:

[ "$1" == "--help" ] && \

awk '/^#: / { print $0 }' $0

Start your help message with "#:". Also convenient for embedding other
messages in scripts.

Comment by lbonanomi 57 weeks ago

