<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
    <link rel='stylesheet' href='style.css' type='text/css' />
    <title>
      command line fu
    </title>
  </head>
  <body>
    <div class='terminal'>
      <div class='author'>
        DoNotRememberMe
      </div>
      <div class='summary'>
        Watch and keep history of a command
      </div>
      <div class='command'>
        CMD="who";SEC=1;N=0;OLD="";NEW=""; while `sleep $SEC`; do OLD="$NEW"; NEW="$(eval $CMD)"; DIFF=`diff &lt;( echo "$OLD" ) &lt;( echo "$NEW" )`; if [ -n "$DIFF" ]; then date; echo "Diff #$N (${SEC}s): $CMD"; echo "$DIFF"; fi; N=$[$N+1]; done | tee /tmp/keepr
      </div>
      <div class='sample'>
        <pre>
Mon Dec 25 14:15:30 EST 2099
Diff #0 (1s): who
1c1
&lt;
---
&gt; [me]     pts/1        2099-12-25 09:50 ([i.forget])
Mon Dec 25 14:15:32 EST 2099
Diff #4 (1s): who
1a2
&gt; [notme]  pts/2        2099-12-25 14:15 ([i.forget])
Mon Dec 25 14:20:37 EST 2099
Diff #11 (1s): who
1a2
&lt; [notme]  pts/2        2099-12-25 14:15 ([i.forget])
</pre>
      </div>
      <div class='desc'>
        <p>
          Watch any command (pipes ok, quotes be careful) and keep history in a file. Good for watching and recording any kind of status or error condition, file creations, etc. The choice of "who" as CMD was just to show an obvious usage.
        </p>
        <p>
          Uses plenty of shell tricks that can be disassembled for simpler stuff. It's deliberately not perfect, but it is generic, and can be customized for your own uses. Had to shorten a little to meet 255 chars.
        </p>
        <p>
          Better than "watch" how? It keeps a date log of what is going on, and tee'd output is plain-text.
        </p>
      </div>
    </div>
  </body>
</html>
