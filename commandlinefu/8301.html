<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
  <head>
    <link rel='stylesheet' href='style.css' type='text/css' />
    <title>
      command line fu
    </title>
  </head>
  <body>
    <div class='terminal'>
      <div class='author'>
        linuts
      </div>
      <div class='summary'>
        Find out current working directory of a process
      </div>
      <div class='command'>
        readlink /proc/self/cwd
      </div>
    </div>
    <div class='terminal'>
      <div class='author'>
        mhs
      </div>
      <div class='summary'>
        <a href="/commands/view/8307/find-out-the-starting-directory-of-a-script" title="Find out what others think of this command">Find out the starting directory of a script</a>
      </div>
      <div class='command'>
        echo "${0%/*}"
      </div>
      <div class='desc'>
        <p>
          Invoked from within a shell script, this will print the directory in which the script resides. Doesn't depend on external tools, /proc/self/*, etc.. (`echo` is a shell builtin.) To see the *current working* directory of a script, use `pwd`.
        </p>
      </div>
    </div>
    <div class='terminal'>
      <div class='author'>
        splante
      </div>
      <div class='summary'>
        <a href="/commands/view/8292/find-out-current-working-directory-of-a-process" title="Find out what others think of this command">Find out current working directory of a process</a>
      </div>
      <div class='command'>
        eval ls -l /proc/{$(pgrep -d, COMMAND)}/cwd
      </div>
      <div class='sample'>
        <pre>
$ eval ls -l /proc/{$(pgrep -d, vim)}/cwd
lrwxrwxrwx 1 splante 20000 0 Apr 14 09:25 /proc/11611/cwd -&gt; /home/splante/p
lrwxrwxrwx 1 splante 20000 0 Apr 14 09:26 /proc/11680/cwd -&gt; /tmp
$ sudo ls -l /proc/$(pgrep X)/cwd
lrwxrwxrwx 1 root root 0 Apr 13 18:31 /proc/3945/cwd -&gt; /
</pre>
      </div>
      <div class='desc'>
        <p>
          This is an alternative to another command using two xargs. If it's a command you know there's only one of, you can just use:
        </p><code>ls -l /proc/$(pgrep COMMAND)/cwd</code>
      </div>
    </div>
    <div class='terminal'>
      <div class='author'>
        ento
      </div>
      <div class='summary'>
        <a href="/commands/view/1193/find-out-current-working-directory-of-a-process" title="Find out what others think of this command">Find out current working directory of a process</a>
      </div>
      <div class='command'>
        echo COMMAND | xargs -ixxx ps -C xxx -o pid= | xargs -ixxx ls -l /proc/xxx/cwd
      </div>
    </div>
    <div class='terminal'>
      <div class='author'>
        xeor
      </div>
      <div class='summary'>
        <a href="/commands/view/8358/find-out-the-starting-directory-of-a-script" title="Find out what others think of this command">Find out the starting directory of a script</a>
      </div>
      <div class='command'>
        mydir=$(cd $(dirname ${BASH_SOURCE:-$0});pwd)
      </div>
      <div class='desc'>
        <p>
          I submitted a command like this without $0 if $BASH_SOURCE is unset. Therefor, it did only work when using ./script, not using 'sh script'. This version handles both, and will set $mydir in a script to the current working directory. It also works on linux, osx and probably bsd.
        </p>
      </div>
    </div>
    <div class='terminal'>
      <div class='author'>
        xeor
      </div>
      <div class='summary'>
        <a href="/commands/view/8312/find-out-the-starting-directory-of-a-script" title="Find out what others think of this command">Find out the starting directory of a script</a>
      </div>
      <div class='command'>
        current_dir=$(cd $(dirname $BASH_SOURCE);pwd)
      </div>
      <div class='desc'>
        <p>
          I think this is the cleanest way of getting the current working directory of a script. It also works on osx, Linux, and probably bsd as well..
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        eikenberry
      </div>
      <div class='text'>
        <p>
          Unless the path is a link, readlink doesn't echo the path by default. It needs either '-e' or '-m' to echo whether or not the path is to a link.
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        linuts
      </div>
      <div class='text'>
        <p>
          /proc/self/cwd is always a symlink (man proc)
        </p>
      </div>
    </div>
    <div class='comment'>
      <div class='author'>
        splante
      </div>
      <div class='text'>
        <p>
          This is not really an "alternative" to some of the others, as this is the current working directory of the *current* process. A couple of the earlier alternatives are for finding the working directory of some other command, such as the apache executable or the currently running vim commands.
        </p>
        <p>
          Your version is almost the same as the much simpler $PWD (or pwd command), except yours returns the canonical version of the directory which is handy. You could accomplish the same with
        </p><code>readlink -f $PWD</code>
        <p>
          but that's not really easier.
        </p>
      </div>
    </div>
  </body>
</html>
